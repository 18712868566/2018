<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>获取url的参数</title>
</head>

<body>

</body>
<script>
    let url = 'https://www.baidu.com:8085/s?ie=utf-8&f=8&rsv_bp=1&tn=baidu&wd=substr&oq=js%25E8%258E%25B7%25E5%258F%2596url%25E5%258F%2582%25E6%2595%25B0&rsv_pq=8da4f82700003c09&rsv_t=3891lJ8mijigFtUdsHqUMNo58314LDShAhEXzZWY7chPtRlrhdNNjb4zZTg&rqlang=cn&rsv_enter=1&inputT=903&rsv_sug3=24&rsv_sug1=24&rsv_sug7=100&rsv_n=2&rsv_sug2=0&rsv_sug4=400354';
    let aElement = document.createElement('a');

    aElement.href = url;
    /* console.log(aElement);


    console.log('协议:' + aElement.protocol);
    console.log('包含有URL中主机名:端口号部分的字符串:' + aElement.host);
    console.log('包含URL中主机名的字符串:' + aElement.hostname);
    console.log('端口号:' + aElement.port);
    console.log('URL的路径部分-就是文件地址:' + aElement.pathname);
    console.log('设置或获取 href 属性中跟在 ? 后面的部分:' + aElement.search);
    console.log('哈希值,"#"号(CGI参数)之后的字符串.:' + aElement.hash); */


    function UrlSearch() {
        let name, value;
        // let str = location.href; // 获取整个url
        let str = aElement.href; // 获取整个url
        let num = str.indexOf("?"); // 返回?所在位置

        str = str.substr(num + 1);

        var arr = str.split("&"); // 各个参数放到数组里
        console.log(arr);

        for (let i = 0; i < arr.length; i++) {
            const element = arr[i];
            num = element.indexOf('=');
            if (num > 0) {
                name = element.substring(0, num);
                value = element.substr(num + 1);
                this[name] = value;
            }
        }
    }

    UrlSearch();


    /*
    substr() 方法可在字符串中抽取从 start 下标开始的指定数目的字符。

        语法:
        stringObject.substr(start,length)
            start:   必需。要抽取的子串的起始下标。必须是数值。如果是负数，那么该参数声明从字符串的尾部开始算起的位置。也就是说，-1 指字符串中最后一个字符，-2 指倒数第二个字符，以此类推。
            length:  可选。子串中的字符数。必须是数值。如果省略了该参数，那么返回从 stringObject 的开始位置到结尾的字串。

        
        返回值:
            一个新的字符串，包含从 stringObject 的 start（包括 start 所指的字符） 处开始的 length 个字符。如果没有指定 length，那么返回的字符串包含从 start 到 stringObject 的结尾的字符。
    */
</script>

</html>